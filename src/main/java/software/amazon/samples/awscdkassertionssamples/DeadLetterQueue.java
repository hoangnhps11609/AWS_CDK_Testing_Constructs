package software.amazon.samples.awscdkassertionssamples;

import org.jetbrains.annotations.NotNull;
import software.amazon.awscdk.services.cloudwatch.Alarm;
import software.amazon.awscdk.services.cloudwatch.IAlarm;
import software.amazon.awscdk.services.sqs.Queue;
import software.constructs.Construct;

public class DeadLetterQueue extends Queue {
	private final IAlarm messagesInQueueAlarm;

	public DeadLetterQueue(@NotNull Construct scope, @NotNull String id) {
		super(scope, id);

		this.messagesInQueueAlarm = Alarm.Builder.create(this, "Alarm")
				.alarmDescription("There are messages in the Dead Letter Queue.").evaluationPeriods(1).threshold(1)
				.metric(this.metricApproximateNumberOfMessagesVisible()).build();
	}

	public IAlarm getMessagesInQueueAlarm() {
		return messagesInQueueAlarm;
	}
}